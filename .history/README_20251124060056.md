Accesorios Frices API ‚ú®üíé

API b√°sica para gestionar clientes de la tienda Accesorios Frices, con autenticaci√≥n mediante JWT, validaci√≥n con Zod, patr√≥n MVC + Services + Repositories y conexi√≥n a MySQL usando mysql2/promise.

üß± Stack Tecnol√≥gico

Node.js (ESM)

Express 5

mysql2/promise

Zod

bcryptjs

JSON Web Token (jsonwebtoken)

Nodemon

üìÅ Estructura del Proyecto
src/
  app.js
  server.js

  routes/
    index.js
    auth.routes.js
    clientes.routes.js

  controllers/
    auth.controller.js
    cliente.controller.js

  services/
    auth.service.js
    cliente.service.js

  repositories/
    cliente.repository.js

  models/
    auth.model.js
    cliente.model.js

  middlewares/
    auth.js
    errorHandler.js
    notFound.js

  utils/
    db.js

bd/
  accesorios_frices.sql

.env

üóÑ Script SQL incluido (lo que t√∫ ya tienes)

El archivo bd/accesorios_frices.sql crea la base de datos y la tabla clientes, e inserta un cliente demo.

-- Base de datos AccesoriosFrices + tabla clientes
CREATE DATABASE IF NOT EXISTS `AccesoriosFrices`
  DEFAULT CHARACTER SET utf8mb4
  COLLATE utf8mb4_general_ci;

USE `AccesoriosFrices`;

CREATE TABLE IF NOT EXISTS `clientes` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(120) NOT NULL,
  `email` VARCHAR(160) NOT NULL,
  `password_hash` VARCHAR(255) NOT NULL,
  `activo` TINYINT(1) NOT NULL DEFAULT 1,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_clientes_email` (`email`)
);

INSERT INTO `clientes` (nombre, email, password_hash, activo)
VALUES (
  'Cliente Demo',
  'fernando@hotmail.com',
  '$2b$10$uxN3uzuoAwWGEGjcDyR4h..JaW0iopIO2FZ19G8CtSzoqh2NmWUYW',
  1
);


‚ö† Contrase√±a del cliente demo (texto plano):

12345678

‚öôÔ∏è Configuraci√≥n
1. Instalar dependencias
npm install

2. Ejecutar el script SQL
Desde CLI:
mysql -u <usuario> -p < ./bd/accesorios_frices.sql

O desde Workbench / HeidiSQL:

Abrir archivo

Ejecutar todo

Confirmar que existe la tabla clientes

3. Crear archivo .env
PORT=3000

MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=TU_USUARIO
MYSQL_PASSWORD=TU_PASSWORD
MYSQL_DB=AccesoriosFrices

JWT_SECRET=ALGO_MUY_LARGO_Y_SEGURO
JWT_EXPIRES_IN=1h

üöÄ Ejecuci√≥n
Modo desarrollo
npm run dev

Modo producci√≥n
npm start

üîå Endpoints
Health Check
GET /
GET /api/health
üîê Autenticaci√≥n
POST /api/auth/login

Body JSON:

{
  "email": "fernando@hotmail.com",
  "password": "12345678"
}


Respuesta:

{
  "token": "JWT_AQUI",
  "user": {
    "id": 1,
    "nombre": "Cliente Demo",
    "email": "fernando@hotmail.com"
  }
}


Usar en rutas protegidas:

Authorization: Bearer JWT_AQUI

üë§ CRUD de Clientes (Protegido con JWT)
1. GET /api/clientes

Lista de clientes:

{
  "data": [ ... ],
  "meta": {
    "limit": 50,
    "offset": 0,
    "count": 1
  }
}

2. GET /api/clientes/:id

Consulta por ID:

GET /api/clientes/1
Authorization: Bearer <token>

3. POST /api/clientes
{
  "nombre": "Nuevo Cliente",
  "email": "nuevo@example.com",
  "password": "unaClave123",
  "activo": true
}

4. PATCH /api/clientes/:id
{
  "nombre": "Nombre Actualizado"
}

5. DELETE /api/clientes/:id

Elimina o desactiva un cliente.

üë§ Autora

Frida V√°zquez de la Cruz
Proyecto: Accesorios Frices ‚Äì API de Clientes